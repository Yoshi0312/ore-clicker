# 鉱石破壊クリッカーゲーム 統合仕様書（v2.0）

## 1. ゲーム概要

### タイトル
**Ore Breaker Incremental**

### ジャンル
クリック型インクリメンタルゲーム

### コンセプト
鉱山フィールド上の複数鉱石を破壊し、資源を集めて施設・スキル・装備を解放。
Cookie Clickerの「施設DPS」と、クリッカーの「アクション性」を融合。
**放置でも成長、操作すればもっと成長** を実現。

### デザイン原則
1. **序盤は軽快に** — 最初の数分で成長を実感
2. **選択の楽しさ** — 施設 or スキル or 強化、何に投資するか
3. **解放の喜び** — 新要素が次々アンロック
4. **放置でも成長** — DPSによるアイドル進行
5. **操作の爽快感** — コンボ・クリティカル・スキル

---

## 2. 画面レイアウト

### 設計方針
- **参考**: 添付画像のレイアウト（大フィールド＋右サイドバー＋ボトムバー）
- **ノースクロール**: 全要素を1画面に収める（1080×608基準）
- **ダークテーマ**: 鉱山の暗い雰囲気
- **ピクセルアート風**: 8bit寄りのレトロゲームUI

### メインレイアウト（1080×608想定）

```
┌──────────────────────────────────────────────────────────────────┐
│ 💎 12.3K 資源   ⚡ 85/100   Lv.15   DPS: 156.7/s   x23 GREAT! │  ← トップバー
├──────────────────────────────────────────────┬───────────────────┤
│                                              │                   │
│                                              │   ≡ 施設ショップ   │
│       ┌──┐  ┌──┐                             │                   │
│       │🪨│  │🟫│    ┌──┐                      │  🖱️ 自動ｸﾘｯｶｰ x10│
│       └──┘  └──┘    │⚫│                      │     0.1 DPS  [25] │
│                      └──┘                    │                   │
│    ┌──┐         ┌──┐    ┌──┐                  │  👷 見習い鉱夫 x5 │
│    │💎│   ✨    │🟡│    │⚪│                  │     1.0 DPS [173] │
│    └──┘  [黄金鉱]└──┘    └──┘                  │                   │
│              ┌──┐    ┌──┐                     │  ⛏️ 熟練鉱夫 x2  │
│              │🪨│    │💠│                     │     8.0 DPS[1.5K] │
│              └──┘    └──┘                     │                   │
│                                              │  🔧 削岩機 x0     │
│         [鉱山背景：岩肌テクスチャ＋              │    47.0 DPS [12K] │
│          暗いグラデーション]                    │                   │
│                                              │  ─────────────── │
│                                              │  📋 アップグレード │
│                                              │  🔨 強化ｸﾘｯｸ [500]│
│                                              │  💪 握力II  [2.0K]│
│                                              │  ⭐ 師弟関係 [50K]│
├──────────────────────────────────────────────┴───────────────────┤
│ [⚔️連撃] [💥粉砕] [👁️黄金] [🔥狂乱] [⚡必殺]   │ 💾保存 ★転生 ⚙設定│
└──────────────────────────────────────────────────────────────────┘
                            ↑ ボトムバー（スキル＋メニュー）
```

### レイアウト詳細

| エリア | サイズ比率 | 内容 |
|--------|-----------|------|
| トップバー | 高さ40px | 資源、レベル、エネルギー、DPS、コンボ |
| メインフィールド | 70% width | 鉱石の配置エリア（散らばり配置） |
| 右サイドバー | 30% width | 施設ショップ＋アップグレード |
| ボトムバー | 高さ50px | スキルボタン＋メニューボタン |

### フィールドの鉱石配置
- **グリッド配置ではなく散らばり配置**（参考画像のように）
- 4〜8個の鉱石がフィールド内にランダム配置
- 各鉱石にHPバー表示
- 破壊時にパーティクル演出
- ゴールデンオア出現時は光るエフェクト付き

---

## 3. 通貨・リソース

| 通貨名 | 用途 | 獲得方法 |
|--------|------|----------|
| **鉱石資源** 💎 | 施設・アップグレード購入 | 鉱石破壊、DPS生産 |
| **経験値(EXP)** | レベルアップ | 鉱石破壊 |
| **エネルギー** ⚡ | スキル発動 | 自然回復、鉱石破壊 |
| **星の欠片** ★ | 転生アップグレード | 転生時に獲得 |

### 数値表記

```js
const suffixes = ["", "K", "M", "B", "T", "Qa", "Qi", "Sx", "Sp", "Oc"];

function formatNumber(num) {
  if (num < 1000) return Math.floor(num).toString();
  const exp = Math.floor(Math.log10(num) / 3);
  const suffix = suffixes[Math.min(exp, suffixes.length - 1)];
  return (num / Math.pow(1000, exp)).toFixed(exp >= 2 ? 2 : 1) + suffix;
}
// 例: 1234 → "1.2K", 1234567 → "1.23M"
```

---

## 4. 数学的基盤

### 4.1 施設コスト計算式（Cookie Clicker準拠）

```
コスト(n) = floor(基礎コスト × 1.15^n)
n = 現在の所持数
```

### 4.2 レベルアップ経験値

```
必要EXP(Lv) = floor(10 × 1.5^(Lv-1))
```

| レベル | 必要EXP | 累計EXP |
|--------|---------|---------|
| 1→2   | 10      | 10      |
| 5→6   | 51      | 132     |
| 10→11 | 384     | 1,135   |
| 20→21 | 21,792  | 65,923  |

### 4.3 総DPS計算

```
総DPS = Σ(施設数 × 基礎DPS × 施設アップグレード倍率) × グローバル倍率
グローバル倍率 = 転生ボーナス × 実績ボーナス × アクティブスキル効果
```

### 4.4 クリックダメージ計算

```
クリックダメージ = (基礎パワー + 強化ボーナス + DPS%)
                  × コンボ倍率
                  × クリティカル倍率（発動時）
                  × アクティブスキル倍率
```

---

## 5. 鉱石（Ore）システム

### 5.1 フィールド仕様

```js
const fieldConfig = {
  baseSlots: 4,           // 初期スロット数
  maxSlots: 8,            // 最大スロット数
  layout: "scatter",      // "scatter"（散らばり） or "grid"
  slotUnlockCost: [500, 2000, 10000, 50000]
};
```

### 5.2 鉱石出現ロジック

```js
function spawnOre() {
  const pool = ores.filter(ore => state.totalResources >= ore.unlockAt);
  const weights = pool.map((ore, i) => {
    const baseWeight = 100 - (i * 12);
    const rareMod = ore.isRare ? ore.rareChance * 100 : 1;
    return Math.max(baseWeight * rareMod, 3);
  });
  return weightedRandom(pool, weights);
}
```

### 5.3 鉱石データテーブル

| # | 鉱石名 | HP | 資源 | EXP | 出現条件 | レア | 特殊 |
|---|--------|-----|------|-----|----------|------|------|
| 1 | 石 | 3 | 1 | 1 | 初期 | - | - |
| 2 | 石炭 | 5 | 2 | 1 | 累計50 | - | エネルギー+5 |
| 3 | 銅鉱石 | 8 | 3 | 2 | 累計20 | - | - |
| 4 | 鉄鉱石 | 15 | 6 | 4 | 累計100 | - | - |
| 5 | 銀鉱石 | 10 | 15 | 8 | 累計100 | 8% | - |
| 6 | 金鉱石 | 20 | 30 | 15 | 累計500 | 5% | - |
| 7 | アルミ鉱石 | 25 | 12 | 8 | 累計800 | - | - |
| 8 | 水晶 | 35 | 25 | 18 | 累計2000 | - | - |
| 9 | ルビー | 30 | 60 | 35 | 累計3000 | 3% | - |
| 10 | ダイヤモンド | 80 | 100 | 60 | 累計10000 | - | - |
| 11 | 隕石 | 60 | 200 | 120 | 累計25000 | 2% | - |
| 12 | ミスリル | 120 | 180 | 100 | 累計50000 | - | - |
| 13 | オリハルコン | 200 | 400 | 250 | 累計100000 | - | - |
| 14 | ダークマター | 500 | 1500 | 800 | 累計300000 | 1% | - |
| 15 | 賢者の石 | 1000 | 5000 | 3000 | 累計1000000 | 0.5% | - |

### 5.4 鉱石データ構造

```js
{
  id: "stone",
  name: "石",
  emoji: "🪨",
  maxHp: 3,
  reward: 1,
  exp: 1,
  unlockAt: 0,
  isRare: false,
  rareChance: 1.0,
  color: "#8B8B8B",
  description: "どこにでもある普通の石",
  special: null
}
```

---

## 6. 施設（Buildings）システム

### 6.1 設計思想
- 施設は **自動でDPSダメージを与える**
- 購入ごとに価格が **15%上昇**（Cookie Clicker準拠）
- 上位施設ほど効率良いが高価
- 各施設に **専用アップグレード** が存在

### 6.2 施設データ

| # | 施設名 | 絵文字 | 基礎コスト | 基礎DPS | 解放条件 | 説明 |
|---|--------|--------|------------|---------|----------|------|
| 1 | 自動クリッカー | 🖱️ | 15 | 0.1 | 初期 | 自動でクリック |
| 2 | 見習い鉱夫 | 👷 | 100 | 1 | Lv3 | 若い鉱夫 |
| 3 | 熟練鉱夫 | ⛏️ | 1,100 | 8 | Lv8 | プロの鉱夫 |
| 4 | 削岩機 | 🔧 | 12,000 | 47 | Lv15 | 機械式ドリル |
| 5 | 掘削機 | 🚜 | 130,000 | 260 | Lv22 | 大型採掘機械 |
| 6 | 採掘坑 | 🏗️ | 1,400,000 | 1,400 | Lv30 | 地下坑道 |
| 7 | ドワーフギルド | 🧙 | 20,000,000 | 7,800 | Lv40+転生1 | 伝説の鉱夫集団 |
| 8 | 採掘ゴーレム | 🗿 | 330,000,000 | 44,000 | Lv50+転生2 | 魔法の巨人 |
| 9 | 異次元ポータル | 🌀 | 5,100,000,000 | 260,000 | Lv65+転生3 | 別次元から採掘 |
| 10 | 特異点採掘機 | ⚫ | 75,000,000,000 | 1,600,000 | Lv80+転生5 | ブラックホール |

### 6.3 施設コスト計算

```js
function getBuildingCost(building, amount = 1) {
  const owned = state.buildings[building.id] || 0;
  const r = 1.15;  // Cookie Clicker標準
  if (amount === 1) {
    return Math.ceil(building.baseCost * Math.pow(r, owned));
  }
  // 複数購入: 等比級数の和
  return Math.ceil(
    building.baseCost * Math.pow(r, owned) * (Math.pow(r, amount) - 1) / (r - 1)
  );
}
```

### 6.4 施設のUI表示（右サイドバー）

```
┌──────────────────────────┐
│ 🖱️ 自動クリッカー    x10 │  ← 施設名 + 所持数
│   DPS: 2.0/s    💎 25    │  ← 現在DPS + 次コスト
├──────────────────────────┤
│ 👷 見習い鉱夫       x5  │
│   DPS: 10.0/s   💎 173   │
├──────────────────────────┤
│ ⛏️ 熟練鉱夫        x2  │
│   DPS: 32.0/s   💎 1.5K  │
├──────────────────────────┤
│ 🔧 削岩機          🔒   │  ← 未解放はロック表示
│   Lv15で解放             │
└──────────────────────────┘
```

---

## 7. アップグレードシステム

### 7.1 施設アップグレード（所持数ベースで解放）

各施設に対し、所持数に応じてDPS倍率アップグレードが出現：

| 解放条件 | 効果 | コスト目安 |
|----------|------|------------|
| 1個購入 | DPS ×2 | 基礎コスト×10 |
| 5個購入 | DPS ×2 | 基礎コスト×50 |
| 25個購入 | DPS ×2 | 基礎コスト×500 |
| 50個購入 | DPS ×2 | 基礎コスト×5000 |
| 100個購入 | DPS ×3 | 基礎コスト×50000 |

### 7.2 クリック強化アップグレード

| 名前 | 効果 | コスト | 解放条件 |
|------|------|--------|----------|
| 握力強化 | クリック +1 | 50 | Lv2 |
| 鋼の拳 | クリック +3 | 300 | Lv5 |
| 正確な一撃 | クリック +10 | 2,000 | Lv10 |
| 熟練の技 | クリック +1% of DPS | 5,000 | Lv15 |
| 達人の技 | クリック +5% of DPS | 50,000 | Lv25 |

### 7.3 シナジーアップグレード

施設間の相乗効果（上級要素）：

```js
{
  id: "synergy_miner",
  name: "師弟関係",
  description: "熟練鉱夫1人につき見習い鉱夫DPS+5%\n見習い鉱夫1人につき熟練鉱夫DPS+0.1%",
  cost: 50000,
  unlockCondition: { miner: 15, apprentice: 15 }
}
```

### 7.4 アップグレードのUI表示

右サイドバー下部にアイコングリッドで表示：
- 購入可能: 明るい色 + コスト表示
- 購入済み: チェックマーク
- 未解放: 暗い色 + ?マーク
- ホバーでツールチップ（名前、説明、効果）

---

## 8. スキルシステム

### 8.1 スキル一覧

| スキル | 絵文字 | 効果 | エネルギー | CT | 解放Lv |
|--------|--------|------|-----------|-----|--------|
| 連撃 | ⚔️ | 5秒間クリック2倍 | 30 | 20s | 5 |
| 粉砕 | 💥 | 全鉱石にHP25%ダメージ | 50 | 30s | 10 |
| 黄金の目 | 👁️ | 15秒間レア率3倍 | 40 | 60s | 15 |
| 採掘狂乱 | 🔥 | 10秒間全DPS 5倍 | 80 | 120s | 20 |
| 一撃必殺 | ⚡ | 1つの鉱石を即破壊 | 60 | 90s | 25 |

### 8.2 エネルギーシステム

```js
const energySystem = {
  maxEnergy: 100,
  regenPerSecond: 2,

  // 鉱石破壊でも回復
  onOreBreak(ore) {
    return ore.isRare ? 10 : 2;
  },

  // コンボボーナス回復
  comboEnergyBonus(combo) {
    if (combo >= 50) return 5;
    if (combo >= 20) return 3;
    if (combo >= 10) return 2;
    return 0;
  }
};
```

### 8.3 スキルUI（ボトムバー）

```
┌─────────────────────────────────────────────────────────────┐
│ [⚔️ 20s] [💥 READY] [👁️ 45s] [🔥 READY] [⚡ 🔒]  │ 💾 ★ ⚙ │
└─────────────────────────────────────────────────────────────┘
  ↑ クールダウン中    ↑ 使用可能         ↑ 未解放    ↑ メニュー
```

---

## 9. コンボシステム

### 9.1 仕様
- 鉱石を破壊するとコンボ +1
- **2秒以内** に次の破壊がないとリセット
- コンボ数に応じて報酬ボーナス

### 9.2 コンボテーブル

| コンボ | ボーナス | ラベル | 色 |
|--------|----------|--------|-----|
| 1-4 | +0% | - | 白 |
| 5-9 | +10% | COMBO! | 緑 |
| 10-19 | +25% | GREAT! | 青 |
| 20-49 | +50% | EXCELLENT! | 黄 |
| 50-99 | +100% | FEVER!! | 赤 |
| 100-199 | +150% | SUPER FEVER!!! | 紫 |
| 200+ | +200% | ULTRA FEVER!!!! | 虹 |

### 9.3 コンボ表示
- トップバーの右側に常時表示
- コンボ段階ごとに文字色変化
- フィーバー以上はパルスアニメーション

---

## 10. クリティカルシステム

### 10.1 仕様

```js
const critSystem = {
  baseChance: 0,          // Lv10で5%に解放
  baseMultiplier: 2.0,

  roll() {
    return Math.random() < (this.baseChance + state.player.critChance);
  },

  getDamage(baseDamage) {
    return baseDamage * (this.baseMultiplier + state.player.critMultiplier);
  }
};
```

### 10.2 クリティカル強化

| 名前 | 効果 | コスト | 条件 |
|------|------|--------|------|
| 会心の眼 | クリティカル解放（5%） | 500 | Lv10 |
| 鋭い洞察 | クリ率 +3% | 2,000 | Lv12 |
| 致命的一撃 | クリ倍率 +0.5 | 5,000 | Lv15 |
| 必殺の構え | クリ率 +5% | 20,000 | Lv20 |
| 究極の一撃 | クリ倍率 +1.0 | 100,000 | Lv30 |

### 10.3 クリティカル演出
- 通常ダメージ: 白い数値ポップアップ
- クリティカル: 大きな黄色い数値 + 画面シェイク

---

## 11. ゴールデンオア（Golden Cookie風）

### 11.1 仕様
定期的にフィールド上に **光る特別な鉱石** が出現。
クリックすると特殊効果を得られる（13秒で消滅）。

### 11.2 出現間隔
- 基本: 60〜180秒ごとにランダム出現
- 転生ボーナスで間隔短縮可能

### 11.3 効果テーブル

| 効果 | 内容 | 確率 | 持続 |
|------|------|------|------|
| フィーバー | DPS ×7 | 50% | 30秒 |
| ラッキー | 所持資源の10%獲得 | 30% | 即時 |
| クリックフィーバー | クリック ×777 | 10% | 20秒 |
| コンボブースト | コンボ即座に+50 | 10% | 即時 |

### 11.4 演出
- 出現時: 光るパーティクル + 回転アニメーション
- ホバー時: 拡大 + 光の輪
- クリック時: 爆発エフェクト + 効果テキスト表示

---

## 12. 転生（Prestige）システム

### 12.1 転生条件
- 累計資源 **50,000** 以上
- レベル20以上

### 12.2 リセット内容

| リセットされる | 維持される |
|---------------|-----------|
| 資源 | 星の欠片 |
| 施設 | 転生アップグレード |
| 通常アップグレード | 実績 |
| レベル | 統計 |
| スキル進行 | 設定 |

### 12.3 星の欠片計算

```js
function calculateStarFragments(totalResources) {
  if (totalResources < 50000) return 0;
  return Math.floor(Math.sqrt(totalResources / 1000));
}
// 50K → 7個, 100K → 10個, 1M → 31個
```

### 12.4 転生ボーナス
- 欠片1個あたり **全DPS +5%**

### 12.5 転生アップグレード

| 名前 | 効果 | コスト(★) |
|------|------|-----------|
| 熟練の記憶 | 初期資源+100 | 1 |
| 魂の打撃 | クリック +50% | 3 |
| 永久機関 | 全DPS +25% | 5 |
| 悟りの境地 | EXP獲得 +50% | 10 |
| 幸運の星 | レア率 +10% | 15 |
| 夢の採掘 | オフライン効率 +50% | 20 |

---

## 13. 実績システム

### 13.1 実績カテゴリ

| カテゴリ | 実績例 | 報酬 |
|----------|--------|------|
| 資源 | 累計100/1K/10K/100K/1M | 各+1〜5% |
| 施設 | 合計10/50/100/200個 | 各+1〜3% |
| クリック | 100/1K/10K回 | 各+1% |
| コンボ | 10/50/100/200 | 各+1〜3% |
| レベル | Lv10/25/50/80 | 各+2〜5% |
| 特殊 | 全レア破壊、初転生 | 各+5% |

### 13.2 実績ボーナス
- 実績解除ごとに個別の倍率ボーナス
- 5個解除ごとに追加 +2%
- 全実績でグローバル倍率に乗算

---

## 14. オフライン進行

### 14.1 仕様

```js
function applyOfflineProgress(lastSave) {
  const seconds = Math.min(
    (Date.now() - lastSave) / 1000,
    8 * 60 * 60  // 最大8時間
  );

  const efficiency = 0.5 + (hasPrestigeUpgrade('offline') ? 0.5 : 0);
  const earned = calculateTotalDps() * seconds * efficiency;

  state.resources += earned;
  state.totalResources += earned;

  showOfflinePopup(seconds, earned);
}
```

### 14.2 オフライン報告UI
```
┌─────────────────────────────────┐
│  おかえりなさい！                │
│                                 │
│  ⏱️ 離席時間: 2時間34分          │
│  💎 獲得資源: 45.6K              │
│  📈 効率: 50%                    │
│                                 │
│       [OK]                      │
└─────────────────────────────────┘
```

---

## 15. セーブ・ロード

### 15.1 仕様
- **localStorage** + Base64エンコード
- **30秒ごと** に自動保存
- 手動保存/ロード/リセット
- エクスポート/インポート（文字列コピペ）

### 15.2 バージョン互換性

```js
function loadGame() {
  const saved = localStorage.getItem("oreBreaker_save");
  if (!saved) return false;

  const decoded = JSON.parse(atob(saved));

  // バージョンマイグレーション
  if (decoded.version < "2.0.0") {
    migrateFromV1(decoded);
  }

  // オフライン進行
  applyOfflineProgress(decoded.timestamp);

  state = decoded.state;
  return true;
}
```

---

## 16. 演出・フィードバック

### 16.1 ダメージ表示
- 通常: 白い数値が浮かび上がる（-3）
- クリティカル: 大きな黄色（-15!）
- DPSダメージ: 小さなグレー

### 16.2 破壊演出
- パーティクル: 鉱石の色の破片が飛び散る
- 報酬表示: 「+30 💎」がフェードアップ
- 即座に新鉱石がフェードイン

### 16.3 コンボ演出
- テキストが段階ごとに色変化
- FEVER以上はパルスアニメーション
- 背景が微かに色付く

### 16.4 ゴールデンオア演出
- ゆっくり回転 + 光のパーティクル
- クリック時に爆発 + 効果テキスト大きく表示

### 16.5 レベルアップ演出
- 画面全体にフラッシュ
- 「LEVEL UP!」テキスト
- 解放要素がある場合はポップアップ通知

---

## 17. 状態管理

```js
const initialState = {
  // プレイヤー
  player: {
    level: 1,
    exp: 0,
    resources: 0,
    totalResources: 0,
    baseClickDamage: 1,
    critChance: 0,
    critMultiplier: 0
  },

  // フィールド
  field: {
    slots: 4,
    ores: [],
    combo: 0,
    comboTimer: 0
  },

  // 施設
  buildings: {},

  // アップグレード（購入済み）
  upgrades: {},

  // スキル
  skills: {},
  energy: 100,
  maxEnergy: 100,

  // 転生
  prestige: {
    count: 0,
    starFragments: 0,
    upgrades: {}
  },

  // 実績
  achievements: {},

  // 統計
  stats: {
    totalClicks: 0,
    totalOresBroken: 0,
    totalCriticals: 0,
    maxCombo: 0,
    playTime: 0,
    goldenOresClicked: 0
  },

  // 設定
  settings: {
    soundEnabled: false,
    particlesEnabled: true
  },

  // メタ
  lastSaveTime: Date.now(),
  gameVersion: "2.0.0"
};
```

---

## 18. ゲームループ

```js
function gameLoop(timestamp) {
  const dt = (timestamp - lastTimestamp) / 1000;
  lastTimestamp = timestamp;

  // === 毎フレーム処理 ===
  applyDpsDamage(dt);        // DPSダメージ適用
  regenEnergy(dt);           // エネルギー回復
  updateComboTimer(dt);      // コンボタイマー
  updateSkillCooldowns(dt);  // スキルCD
  updateActiveSkills(dt);    // アクティブスキル効果
  updateGoldenOre(dt);       // ゴールデンオア処理

  // === 定期チェック ===
  checkUnlocks();            // 解放条件チェック
  checkAchievements();       // 実績チェック

  // === 統計 ===
  state.stats.playTime += dt;

  // === UI更新 ===
  updateUI();

  // === オートセーブ ===
  if (Date.now() - state.lastSaveTime > 30000) {
    saveGame();
  }

  requestAnimationFrame(gameLoop);
}
```

---

## 19. ビジュアルデザイン

### 19.1 配色

```css
:root {
  /* 背景 */
  --bg-main: #1a1a2e;
  --bg-field: linear-gradient(135deg, #2d1b0e 0%, #3e2723 50%, #1a0f05 100%);
  --bg-sidebar: #16213e;
  --bg-topbar: #0f3460;
  --bg-bottombar: #1a1a2e;

  /* テキスト */
  --text-primary: #eee;
  --text-secondary: #aaa;
  --text-gold: #ffd700;

  /* アクセント */
  --accent: #e94560;
  --success: #4ecca3;
  --warning: #ffc107;

  /* コンボ色 */
  --combo-normal: #ffffff;
  --combo-great: #4ecca3;
  --combo-excellent: #ffc107;
  --combo-fever: #e94560;
  --combo-super: #9b59b6;
  --combo-ultra: linear-gradient(rainbow);

  /* 鉱石色 */
  --ore-stone: #8B8B8B;
  --ore-copper: #B87333;
  --ore-iron: #434343;
  --ore-silver: #C0C0C0;
  --ore-gold: #FFD700;
  --ore-diamond: #B9F2FF;
  --ore-rare-glow: 0 0 15px #FFD700;
}
```

### 19.2 フィールドデザイン
- ダークな岩肌テクスチャ（茶〜黒のグラデーション）
- 微かな岩の模様（repeating-linear-gradient）
- フィールド境界は石造りの枠（border-imageまたはbox-shadow）
- 鉱石はフィールド内に散らばって配置
- 参考画像のように装飾的なフレーム

### 19.3 フォント
- UIフォント: monospace系（ゲーム感）
- 数値表示: 太字
- ダメージ数値: text-shadow付き

---

## 20. レベル解放テーブル

| レベル | 解放内容 |
|--------|----------|
| 1 | ゲーム開始 |
| 2 | クリック強化「握力強化」 |
| 3 | 施設「見習い鉱夫」 |
| 5 | スキル「連撃」 |
| 8 | 施設「熟練鉱夫」 |
| 10 | クリティカル解放、スキル「粉砕」 |
| 12 | クリティカル強化 |
| 15 | 施設「削岩機」、スキル「黄金の目」 |
| 20 | 転生システム、スキル「採掘狂乱」 |
| 22 | 施設「掘削機」 |
| 25 | スキル「一撃必殺」 |
| 30 | 施設「採掘坑」 |
| 40 | 施設「ドワーフギルド」（転生1回必要） |
| 50 | 施設「採掘ゴーレム」（転生2回必要） |
| 65 | 施設「異次元ポータル」（転生3回必要） |
| 80 | 施設「特異点採掘機」（転生5回必要） |

---

## 21. バランスシミュレーション

### 21.1 想定プレイ進行

| 時間 | レベル | 累計資源 | DPS | 主な出来事 |
|------|--------|----------|-----|------------|
| 0分 | 1 | 0 | 0 | ゲーム開始、クリックのみ |
| 1分 | 2 | ~30 | 0 | 握力強化購入 |
| 3分 | 4 | ~100 | 0.5 | 自動クリッカー数台 |
| 5分 | 5 | ~200 | 2 | 連撃スキル解放 |
| 10分 | 8 | ~600 | 10 | 熟練鉱夫解放 |
| 20分 | 12 | ~2,000 | 50 | クリティカル活用 |
| 45分 | 18 | ~10,000 | 200 | 転生圏に近づく |
| 1時間 | 20 | ~30,000 | 500 | 転生システム解放 |
| 2時間 | 25 | ~100,000 | 2,000 | 初回転生推奨 |

### 21.2 転生サイクル
- 1回目転生: ★7獲得 → 2回目まで約1時間
- 3回目転生: ★30以上 → ドワーフギルド解放
- 5回目転生: ★70以上 → 特異点解放圏

---

## 22. 実装優先度

### Phase 1: MVP
- [ ] 画面レイアウト（トップ/フィールド/サイド/ボトム）
- [ ] 基本クリック処理 + ダメージ表示
- [ ] フィールド（4スロット、散らばり配置）
- [ ] 鉱石5種（石、銅、鉄、銀、金）
- [ ] 施設3種（自動クリッカー、見習い、熟練）
- [ ] クリック強化2種
- [ ] レベルシステム（Lv1-20）
- [ ] セーブ/ロード

### Phase 2: コア機能
- [ ] コンボシステム
- [ ] クリティカルシステム
- [ ] スキル3種（連撃、粉砕、黄金の目）
- [ ] 施設アップグレード（各3段階）
- [ ] 鉱石10種まで拡張
- [ ] エネルギーシステム
- [ ] 演出（パーティクル、アニメーション）

### Phase 3: 拡張
- [ ] 転生システム + 転生アップグレード
- [ ] ゴールデンオア
- [ ] 実績システム（30種）
- [ ] スキル全5種
- [ ] シナジーアップグレード
- [ ] フィールド拡張（8スロットまで）

### Phase 4: 完成
- [ ] 施設全10種
- [ ] 鉱石全15種
- [ ] 実績全50種以上
- [ ] オフライン進行
- [ ] バランス調整
- [ ] エクスポート/インポート
- [ ] ピクセルアート化

---

## 23. 技術仕様

### アーキテクチャ
- **1ファイル HTML + CSS + JS**（index.html）
- フレームワーク不使用（Vanilla JS）
- ES6+構文
- requestAnimationFrame（60FPS）ゲームループ

### レスポンシブ
- 基準解像度: 1080×608
- フレキシブルレイアウト（CSS Grid + Flexbox）
- 最小表示: 800×500

### パフォーマンス
- DOM操作の最小化（差分更新）
- アニメーションはCSS Animationを優先
- requestAnimationFrame内で重い処理を避ける

---

## 24. 将来の拡張アイデア

### 24.1 深度システム
- 鉱山の深さを段階的に開放
- 深度ごとに新鉱石＋背景変化
- 深度50+で「次元の裂け目」エリア

### 24.2 装備システム
- ピッケルの種類変更（見た目＋能力）
- 鉄のピッケル、ダイヤピッケル、魔法のピッケルなど
- 実績や転生で解放

### 24.3 鉱石図鑑
- 破壊した鉱石の記録
- コンプリート報酬
- 各鉱石の破壊回数、最大ダメージ記録

### 24.4 チャレンジモード
- 特殊ルールでプレイ（時間制限、制約あり）
- 達成で星の欠片やスキン獲得

### 24.5 イベントシステム
- ランダムイベント（鉱脈発見、ボス出現）
- 期間限定イベント的な要素

### 24.6 マルチプレイ（将来構想）
- ランキング（累計資源、コンボ）
- フレンドのDPS応援

---

## バージョン履歴

| バージョン | 内容 |
|-----------|------|
| v0.1 | 初期実装（基本クリック） |
| v0.2 | フィールド・スキル・仲間の設計 |
| v0.3 | Phase1-3実装完了、アイコンUI |
| v1.0 | Cookie Clicker準拠の施設設計 |
| **v2.0** | **v0.3とv1.0を統合。施設DPS型＋散らばりフィールド＋フルUI設計** |

---

以上、Ore Breaker Incremental v2.0 統合仕様書でした。
